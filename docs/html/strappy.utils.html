
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>strappy.utils package &#8212; strappy 0.6.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/classic.css" />
    
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">strappy 0.6.0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">strappy.utils package</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="strappy-utils-package">
<h1>strappy.utils package<a class="headerlink" href="#strappy-utils-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-strappy.utils.binners">
<span id="strappy-utils-binners-module"></span><h2>strappy.utils.binners module<a class="headerlink" href="#module-strappy.utils.binners" title="Permalink to this headline">¶</a></h2>
<p>Binner functions for grouping numeric variables into
bins</p>
<dl class="py function">
<dt class="sig sig-object py" id="strappy.utils.binners.binner_df">
<span class="sig-prename descclassname"><span class="pre">strappy.utils.binners.</span></span><span class="sig-name descname"><span class="pre">binner_df</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">new_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fill_nan</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'MISSING'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_levels</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#strappy.utils.binners.binner_df" title="Permalink to this definition">¶</a></dt>
<dd><p>Bin a numeric variable</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas.DataFrame</em>) – </p></li>
<li><p><strong>x</strong> (<em>str</em>) – The name of the numeric variable in ‘df’ to
construct bins from</p></li>
<li><p><strong>new_col</strong> (<em>str</em>) – Use as the name of the binned variable</p></li>
<li><p><strong>fill_nan</strong> (<em>str</em>) – Value to fill nans with</p></li>
<li><p><strong>max_levels</strong> (<em>int</em>) – Maximum number of bins to create from ‘x’</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>pandas.DataFrame including new binned column</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="strappy.utils.binners.cutpoints">
<span class="sig-prename descclassname"><span class="pre">strappy.utils.binners.</span></span><span class="sig-name descname"><span class="pre">cutpoints</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qntl_cutoff</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[0.025,</span> <span class="pre">0.975]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cuts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'linear'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ncuts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sig_fig</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#strappy.utils.binners.cutpoints" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to return cut points and bin labels for a numeric 1-D array</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<em>numpy 1-D array</em>) – numeric 1-D array</p></li>
<li><p><strong>qntl_cutoff</strong> (<em>list</em>) – list of length two with lower and upper quantile cutoffs:
To prevent extreme outliers from influencing the cutpoints
for the bins, construct the cutpoints between the qntl_cutoff[0] quantile
and the qntl_cutoff[1] quantile. If qntl_cutoff is None then do not
ignore outliers</p></li>
<li><p><strong>cuts</strong> (<em>str</em>) – <p>one of: ‘linear’, ‘log’, ‘logp1’, ‘quantile’
‘linear’ : equally spaced cutpoints
‘log’ : logarithmically spaced cutpoints
‘logp1’ : logarithmically spaced cutpoints after adding 1
‘root’ : apply transform np.sign(x)*np.sqrt(abs(x)) and then</p>
<blockquote>
<div><p>space points linearly</p>
</div></blockquote>
<p>’quantile’ : cutpoints corresponding to equally spaced quantiles</p>
</p></li>
<li><p><strong>ncut</strong> (<em>int</em>) – number of cutpoints</p></li>
<li><p><strong>sig_fig</strong> (<em>int</em>) – number of significant figures to display in the aesthetically
printed bin labels</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>c_final</strong> – final cut points</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy 1-D array</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="strappy.utils.binners.cutter">
<span class="sig-prename descclassname"><span class="pre">strappy.utils.binners.</span></span><span class="sig-name descname"><span class="pre">cutter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_levels</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">point_mass_threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sig_fig</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#strappy.utils.binners.cutter" title="Permalink to this definition">¶</a></dt>
<dd><p>Cut a numeric variable into bins</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas.DataFrame</em>) – </p></li>
<li><p><strong>x</strong> (<em>str</em>) – the name of the numeric variable in ‘df’ to construct
bins from</p></li>
<li><p><strong>max_levels</strong> (<em>int</em>) – maximum number of bins to create from ‘x’</p></li>
<li><p><strong>point_mass_threshold</strong> (<em>float</em>) – Levels of ‘x’ with frequency greater than point_mass_threshold
get their own bin</p></li>
<li><p><strong>sig_fig</strong> (<em>int</em>) – Significant figures to use in binning</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>z</strong> – Categorical series of binned values</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.Series</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="strappy.utils.binners.human_readable_num">
<span class="sig-prename descclassname"><span class="pre">strappy.utils.binners.</span></span><span class="sig-name descname"><span class="pre">human_readable_num</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">number</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sig_fig</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#strappy.utils.binners.human_readable_num" title="Permalink to this definition">¶</a></dt>
<dd><p>Function for making numbers aesthetically-pleasing</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>number</strong> (<em>float</em><em> or </em><em>int</em>) – A number to format</p></li>
<li><p><strong>sig_fig</strong> (<em>int</em>) – Number of significant figures to print</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>z</strong> – number formatted as str</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-strappy.utils.dates">
<span id="strappy-utils-dates-module"></span><h2>strappy.utils.dates module<a class="headerlink" href="#module-strappy.utils.dates" title="Permalink to this headline">¶</a></h2>
<p>Date utilities</p>
<dl class="py function">
<dt class="sig sig-object py" id="strappy.utils.dates.bin_dates">
<span class="sig-prename descclassname"><span class="pre">strappy.utils.dates.</span></span><span class="sig-name descname"><span class="pre">bin_dates</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">d</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bins</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">midpoints</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#strappy.utils.dates.bin_dates" title="Permalink to this definition">¶</a></dt>
<dd><p>Bin a 1d-array-like of datetimes</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>d</strong> (<em>1D array-like of datetimes</em>) – </p></li>
<li><p><strong>bins</strong> (<em>int</em><em> or </em><em>1D array-like of datetimes</em>) – </p></li>
<li><p><strong>midpoints</strong> (<em>Boolean</em>) – if True, use midpoints of bins as labels
if False, use bins from pandas.cuts as labels</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>pandas.Series of binned dates</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-strappy.utils.formatters">
<span id="strappy-utils-formatters-module"></span><h2>strappy.utils.formatters module<a class="headerlink" href="#module-strappy.utils.formatters" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="strappy.utils.formatters.datetime_tester">
<span class="sig-prename descclassname"><span class="pre">strappy.utils.formatters.</span></span><span class="sig-name descname"><span class="pre">datetime_tester</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#strappy.utils.formatters.datetime_tester" title="Permalink to this definition">¶</a></dt>
<dd><p>Test non-numeric columns in pandas.DateFrame</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="strappy.utils.formatters.fix_legend">
<span class="sig-prename descclassname"><span class="pre">strappy.utils.formatters.</span></span><span class="sig-name descname"><span class="pre">fix_legend</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ax</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bbox_to_anchor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(1.2,</span> <span class="pre">1.05)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sub_pairs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'\\)$':</span> <span class="pre">'',</span> <span class="pre">'^\\(Count,</span> <span class="pre">':</span> <span class="pre">''}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#strappy.utils.formatters.fix_legend" title="Permalink to this definition">¶</a></dt>
<dd><p>Fix legend</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ax</strong> (<em>matplotlib.axes.Axes</em>) – </p></li>
<li><p><strong>bbox_to_anchor</strong> (<em>tuple</em>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="strappy.utils.formatters.fix_strings">
<span class="sig-prename descclassname"><span class="pre">strappy.utils.formatters.</span></span><span class="sig-name descname"><span class="pre">fix_strings</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sub_pairs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'\\)$':</span> <span class="pre">'',</span> <span class="pre">'^\\(Count,</span> <span class="pre">':</span> <span class="pre">''}</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#strappy.utils.formatters.fix_strings" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="strappy.utils.formatters.space_ticks">
<span class="sig-prename descclassname"><span class="pre">strappy.utils.formatters.</span></span><span class="sig-name descname"><span class="pre">space_ticks</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ax</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_ticks</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#strappy.utils.formatters.space_ticks" title="Permalink to this definition">¶</a></dt>
<dd><p>Space ticks out on x axis</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ax</strong> (<em>matplotlib.axes.Axes</em>) – </p></li>
<li><p><strong>max_ticks</strong> (<em>int</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-strappy.utils.histograms">
<span id="strappy-utils-histograms-module"></span><h2>strappy.utils.histograms module<a class="headerlink" href="#module-strappy.utils.histograms" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="strappy.utils.histograms.categorical_heatmap">
<span class="sig-prename descclassname"><span class="pre">strappy.utils.histograms.</span></span><span class="sig-name descname"><span class="pre">categorical_heatmap</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stat</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'size'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fillna</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'MISSING'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">width_ratios</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[3,</span> <span class="pre">1]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">height_ratios</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[1,</span> <span class="pre">3]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'hot'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#strappy.utils.histograms.categorical_heatmap" title="Permalink to this definition">¶</a></dt>
<dd><p>Function for creating bivariate categorical heatmap</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas.DataFrame object</em>) – </p></li>
<li><p><strong>x</strong> (<em>str</em>) – categorical variable in ‘df’ to plot along the x-axis</p></li>
<li><p><strong>y</strong> (<em>str</em>) – categorical variable in ‘df’ to plot along the y-axis</p></li>
<li><p><strong>stat</strong> (<em>str</em>) – aggregate function to apply to df after grouping by ‘x’ and ‘y’</p></li>
<li><p><strong>fillna</strong> (<em>str</em>) – value to fill numpy NaNs with</p></li>
<li><p><strong>width_ratios</strong> (<em>iterable of length 2</em>) – ratio of the width of the heatmap to the ‘y’ marginal plot</p></li>
<li><p><strong>height_ratios</strong> (<em>iterable of length 2</em>) – ratio of the height of the ‘x’ marginal plot to the heatmap</p></li>
<li><p><strong>cmap</strong> (<em>str</em>) – name of matplotlib registered colormap</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>fig</strong></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>a matplotlib figure</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="strappy.utils.histograms.categorical_histogram">
<span class="sig-prename descclassname"><span class="pre">strappy.utils.histograms.</span></span><span class="sig-name descname"><span class="pre">categorical_histogram</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'x'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">line_columns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_levels</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">oth_val</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'_OTHER_'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stat</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'mean'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#strappy.utils.histograms.categorical_histogram" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to create matplotlib histogram plot</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas DataFrame object</em>) – </p></li>
<li><p><strong>x</strong> (<em>the name of the categorical variable in 'df' to construct bins from</em>) – </p></li>
<li><p><strong>line_columns</strong> (<em>optional list of other columns in 'df' on which to</em>) – calculate and plot ‘stat’</p></li>
<li><p><strong>max_levels</strong> (<em>maximum number of bins to create from 'x' - the max_level</em>) – values of ‘x’ with the greatest record counts receive their own levels,
all other levels are binned as ‘oth_val’</p></li>
<li><p><strong>oth_val</strong> (<em>str used as value for levels with fewer record counts</em>) – </p></li>
<li><p><strong>stat</strong> (<em>aggregate statistic to calculate on 'oth_columns' within</em>) – bins of ‘x’</p></li>
<li><p><strong>normalize</strong> (<em>Boolean</em>) – If True, use percents instead of counts</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>p</strong></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>matplotlib figure</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="strappy.utils.histograms.numeric_histogram">
<span class="sig-prename descclassname"><span class="pre">strappy.utils.histograms.</span></span><span class="sig-name descname"><span class="pre">numeric_histogram</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'x'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">line_columns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_levels</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stat</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'mean'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_levels</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#strappy.utils.histograms.numeric_histogram" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to create matplotlib histogram plot</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas DataFrame object</em>) – </p></li>
<li><p><strong>x</strong> (<em>the name of the numeric variable in 'df' to construct bins from</em>) – </p></li>
<li><p><strong>line_columns</strong> (<em>optional list of other columns in 'df' on which to</em>) – calculate and plot ‘stat’ within bins of ‘x’</p></li>
<li><p><strong>max_levels</strong> (<em>maximum number of bins to create from 'x'</em>) – </p></li>
<li><p><strong>stat</strong> (<em>aggregate statistic to calculate on 'oth_columns' within</em>) – bins of ‘x’</p></li>
<li><p><strong>min_levels</strong> (<em>if 'x' has more than min_levels distinct level</em><em>,</em>) – induce binning</p></li>
<li><p><strong>normalize</strong> (<em>Boolean</em>) – If True, transform counts to percents</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>p</strong></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>matplotlib figure</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="strappy.utils.histograms.plot_bar">
<span class="sig-prename descclassname"><span class="pre">strappy.utils.histograms.</span></span><span class="sig-name descname"><span class="pre">plot_bar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">p</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'x'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">line_columns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#strappy.utils.histograms.plot_bar" title="Permalink to this definition">¶</a></dt>
<dd><p>Function for creating a bar plot for categorical data.
If input pandas DataFrame includes columns that should be plotted as
lines, the names of these columns can be passed in ‘line_columns’
By passing a matplotlib figure, ‘fig’, and axis object, ‘ax’,
this function can add the plot to the provided axis</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>p</strong> (<em>pandas DataFrame object that contains:</em>) – x : the categorical variable to plot along the x-axis
Count : the height of the bars
line_columns : optional list of columns to plot as lines</p></li>
<li><p><strong>x</strong> (<em>the categorical variable in 'df' to plot along the x-axis</em>) – </p></li>
<li><p><strong>line_columns</strong> (<em>optional list of columns to plot as lines</em>) – </p></li>
<li><p><strong>normalize</strong> (<em>Boolean</em>) – If True, convert counts to percents</p></li>
<li><p><strong>**kwargs</strong> (<em>optional parameters:</em>) – fig : a matplotlib figure
ax : a matplotlib axis object</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>fig</strong></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>a matplotlib figure</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="strappy.utils.histograms.stacked_dates_histogram">
<span class="sig-prename descclassname"><span class="pre">strappy.utils.histograms.</span></span><span class="sig-name descname"><span class="pre">stacked_dates_histogram</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">date_var</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cat_var</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bins</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">30</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">midpoints</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stat</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'count'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#strappy.utils.histograms.stacked_dates_histogram" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-strappy.utils.stats">
<span id="strappy-utils-stats-module"></span><h2>strappy.utils.stats module<a class="headerlink" href="#module-strappy.utils.stats" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="strappy.utils.stats.cramers_corrected_matrix">
<span class="sig-prename descclassname"><span class="pre">strappy.utils.stats.</span></span><span class="sig-name descname"><span class="pre">cramers_corrected_matrix</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reorder_cuthill_mckee</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#strappy.utils.stats.cramers_corrected_matrix" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate Cramers V statistic with bias correction for all
combinations of columns in pandas DataFrame df</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas DataFrame - all columns must be categorical</em>) – </p></li>
<li><p><strong>reorder_cuthill_mckee</strong> (<em>boolean - whether to reorder to the columns</em>) – based on the reverse Cuthill McKee algorithm applied to the
matrix of Cramers V statistics</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>Z</strong></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy array with Cramers V statistics</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="strappy.utils.stats.cramers_corrected_stat">
<span class="sig-prename descclassname"><span class="pre">strappy.utils.stats.</span></span><span class="sig-name descname"><span class="pre">cramers_corrected_stat</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">confusion_matrix</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#strappy.utils.stats.cramers_corrected_stat" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate Cramers V statistic for categorial-categorial association.
Uses correction from Bergsma and Wicher,
Journal of the Korean Statistical Society 42 (2013): 323-328</p>
<p>See:
<a class="reference external" href="https://stackoverflow.com/questions/20892799/">https://stackoverflow.com/questions/20892799/</a>
using-pandas-calculate-cram%C3%A9rs-coefficient-matrix</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>confusion_matrix</strong> (<em>numpy confusion matrix</em>) – </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>float</strong></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Cramer’s V statistic with bias correction</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="strappy.utils.stats.cramers_v">
<span class="sig-prename descclassname"><span class="pre">strappy.utils.stats.</span></span><span class="sig-name descname"><span class="pre">cramers_v</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#strappy.utils.stats.cramers_v" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-strappy.utils">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-strappy.utils" title="Permalink to this headline">¶</a></h2>
</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">strappy.utils package</a><ul>
<li><a class="reference internal" href="#submodules">Submodules</a></li>
<li><a class="reference internal" href="#module-strappy.utils.binners">strappy.utils.binners module</a></li>
<li><a class="reference internal" href="#module-strappy.utils.dates">strappy.utils.dates module</a></li>
<li><a class="reference internal" href="#module-strappy.utils.formatters">strappy.utils.formatters module</a></li>
<li><a class="reference internal" href="#module-strappy.utils.histograms">strappy.utils.histograms module</a></li>
<li><a class="reference internal" href="#module-strappy.utils.stats">strappy.utils.stats module</a></li>
<li><a class="reference internal" href="#module-strappy.utils">Module contents</a></li>
</ul>
</li>
</ul>

  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/strappy.utils.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">strappy 0.6.0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">strappy.utils package</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2021, Greg Strabel.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.4.0.
    </div>
  </body>
</html>